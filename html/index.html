<%include header.html%>
  <div class="content">
    <div class="row">
      <div class="col-md-12">
        <div class="card">
          <div class="card-header ">
            <h5 class="card-title">Run Command Interface</h5>
            <p class="card-category">Monitor run commands</p>
          </div>
          <div class="card-body ">
            <div class="typo-line">
                <h3><button id="command" class="category">Command: </button></h3>
                <h3><p class="category">Response: </p>
                    <span id="response"></span>
                </h3>
            </div>
          </div>
          <div class="card-footer ">
            <hr>
            <div id="lastrunat" class="stats"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
<%include footer.html%>

<script type="text/javascript">
  $(document).ready(function(){
    function getTime(){
      const monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
      var today = new Date();
      var date = today.getDate()+' '+(monthNames[today.getMonth()+1])+', '+today.getFullYear();
      var time = today.toLocaleString('en-US', { hour: 'numeric', minute: 'numeric', second: 'numeric', hour12: true });
      var dateTime = date+' '+time;
      return dateTime;
    }
    $('#command').click(function(){
      $.ajax({
        type: "GET",
        url: '/run',
        success: function(data, status){
            if(data.status == true){
              $('#response').html(data.msg);
              $('#lastrunat').html('<i class="fa fa-history"></i> Last run successfuly at '+ getTime() );
            }else{
              $('#response').html(data.err);
              $('#lastrunat').html('<i class="fa fa-history"></i> Last run successfuly at '+ getTime() );
            }
        },
        dataType: "json",
        crossDomain:true
      });
    });
  })
</script>